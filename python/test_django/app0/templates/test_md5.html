{%  load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="file" id="file">

<input type="text" id="id_display" style="width: 300px;">

<script src="{% static 'js/jquery-3.7.0.min.js' %}"></script>
<script src="{% static 'js/spark-md5.min.js' %}"></script>

<script type="text/javascript">
    {#document.querySelector('#file').addEventListener('change', e => {#}
    {#    const file = e.target.files[0];#}
    {#    const fileReader = new FileReader();#}
    {#    fileReader.readAsBinaryString(file);#}
    {#    fileReader.onload = e => {#}
    {#        const md5 = SparkMD5.hashBinary(e.target.result);#}
    {#        console.log(md5);#}
    {#    }#}
    {#   }); #}
    $(function (){
        bindFileCalcMd5Event();
    })

    function  bindFileCalcMd5Event() {
        $("#file").change(function () {
            const file = this.files[0];
            const fileReader = new FileReader();
            fileReader.readAsBinaryString(file);
            fileReader.onload = function(e) {
                const md5 = SparkMD5.hashBinary(e.target.result);//获得文件MD5;
                console.log(md5)
                $("#id_display").val(md5)
            };
        })
    }
</script>
</body>
</html>